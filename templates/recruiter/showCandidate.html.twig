{% extends 'base.html.twig' %}

{% block title %} Sowrs | {{ candidate.firstname }}-{{ candidate.lastname }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>

{% endblock %}


{% block body %}
    <div class="show_candidate_jumbotron pt-3">
        <div class="col-lg-1 mx-auto">
             <div style="width: 100%; height:100%">
            {% if candidate.picture %}
                {% if candidate.picture.pictureName is same as '' %}
                    <img style="width: 100%" id="show_candidate_photo_profile" class="rounded-circle"
                         src="{{ asset('images/profils/avatar.jpg') }}"
                         alt="photo du profil">
                {% else %}
                    <img style="width: 100%" id="show_candidate_photo_profile" class="rounded-circle"
                         src="{{ asset('images/profils/' ~candidate.picture.pictureName ) }}"
                         alt="photo du profil">
                {% endif %}
            {% else %}
                <img style="width: 100%" id="show_candidate_photo_profile" class="rounded-circle"
                     src="{{ asset('images/profils/avatar.jpg') }}"
                     alt="photo du profil">
            {% endif %}
             </div>
        </div>
        <div class="col-lg-5 mx-auto">
            <h4 class="show_candidate_jumbotron_name">{{ candidate.firstName | capitalize }} {{ candidate.lastName | upper }}</h4>
        </div>
        <h5 class="show_candidate_jumbotron_infos">{{ candidate.currentRole | capitalize }}
            - {{ candidate.jobSearch.country.name |capitalize }}

            {% if candidate.jobSearch.city %}
                - {{ candidate.jobSearch.city |capitalize }}
            {% endif %}
            - {{ candidate.jobSearch.contractType.wording | capitalize }}

            {% if candidate.jobSearch.desiredRemuneration %}
                - {{ candidate.jobSearch.desiredRemuneration.text | capitalize }}
            {% endif %}
        </h5>
        {# Gerer les tags #}
        <p class="show_candidate_jumbotron_inspiration">" {{ candidate.inspiration }} "</p><br>
        <a type="button" class="btn position-absolute start-50 translate-middle">Télécharger le CV</a>
    </div>
    <div class="row">
        <div class="col-lg-7">
            <h3 class="subtitle">À propos de {{ candidate.firstName | capitalize }}</h3>
            <p>{{ candidate.about }}</p>

            <h3 class="subtitle">{{ candidate.firstName | capitalize }} est engagé dans </h3>
            <p>njbkjahlbhdhdzhdzhxdnkkjzhdjkzhjnd</p>
        </div>
        <div class="col-lg-5">
            <div class="show_candidate_sens_rate">
                <div class="row">
                    <div class="col-lg-2" style="height: 5em">
                            <img src="{{ asset('img/sens/innegalite.png') }}" style="width: 100%; height: 100%" alt="taux de sens">
                    </div>
                    <div class="col-lg-8">
                        <h5>Taux de sens</h5>
                        <h5>{{ candidate.scoring.dominantPourcent }}% {{ candidate.scoring.dominantSens }}</h5>
                    </div>
                    <div class="col-lg-1 mt-4">
                        <img src="{{ asset('img/boostrap/flecheBas.svg') }}" alt="flèche vers le bas" width="100%"
                             style="margin: 0" id="btn_doughnut">
                    </div>
                </div>
                <div class="show_candidate_doughnut col-lg-8 mx-auto pb-1 collapse" id="doughnut">
                    <canvas id="myChart"></canvas>
                    <br>
                </div>
            </div>
            <br>
            <div>
                <div class="row">
                    <h5 class="col-lg-6 show_candidate_infos_text">Niveau d'expérience :</h5>
                    <h5 class="col-lg-6">{{ candidate.levelExperience.wording }}</h5>
                </div>
                <div class="row">
                    <h5 class="col-lg-6 show_candidate_infos_text">Niveau d'étude :</h5>
                    <h5 class="col-lg-6">{{ candidate.levelStudy.wording }}</h5>
                </div>
                <div class="row">
                    <h5 class="col-lg-6 show_candidate_infos_text">Poste recherché :</h5>
                    <h5 class="col-lg-6">{{ candidate.jobSearch.jobTitle }}</h5>
                </div>
                <div class="row">
                    <h5 class="col-lg-6 show_candidate_infos_text">Cause :</h5>
                    <h5 class="col-lg-6">{{ candidate.jobSearch.cause.text }}</h5>
                </div>
                <div class="row">
                    <h5 class="col-lg-6 show_candidate_infos_text">Autorisation de travailler :</h5>
                    <h5 class="col-lg-6">{{ candidate.authorizedCountry .name }}</h5>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-lg-2 pt-1 pb-1 m-1 rounded-pill show_candidate_socialButton">
                    <a href="{{ candidate.socialNetwork.github }}" target="_blank" >
                        <img src="{{ asset('img/boostrap/github.svg') }}" alt="Page Facebook"></a>
                </div>
                <div class="col-lg-2 pt-1 pb-1 m-1 rounded-pill show_candidate_socialButton">
                    <a href="{{ candidate.socialNetwork.stackOverflow }}" target="_blank">
                        <img src="{{ asset('img/boostrap/stackoverflow-com-logo-svg-vector.svg') }}" alt="Page instagram"
                             class="socialButton"></a>
                </div>
                <div class="col-lg-2 pt-1 pb-1 m-1 rounded-pill show_candidate_socialButton">
                    <a href="{{ candidate.socialNetwork.linkedin }}" target="_blank">
                        <img src="{{ asset('img/linkedin_grist-footer.png') }}" alt="Page linkedin"
                             class="socialButton"></a>
                </div>
                <div class="col-lg-2 pt-1 pb-1 m-1 rounded-pill show_candidate_socialButton">
                    <a href="{{ candidate.socialNetwork.webSite }}" target="_blank">
                        <img src="{{ asset('img/boostrap/google.svg') }}" alt="Page twitter"
                             class="socialButton"></a>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        const btn_doughnut = document.getElementById('btn_doughnut');
        const doughnut = document.getElementById('doughnut');

        btn_doughnut.addEventListener('click', function (e) {
            e.currentTarget.classList.toggle('rotate');
            doughnut.classList.toggle('collapse');

        })


        var ctx = document.getElementById('myChart');
        var myChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Social', 'Environnement', 'Economie', 'Societal'],
                datasets: [{
                    label: '# of Votes',
                    data: [
                        {{ candidate.scoring.social }},
                        {{ candidate.scoring.environment }},
                        {{ candidate.scoring.economy }},
                        {{ candidate.scoring.societal }}
                    ],
                    backgroundColor: [
                        'rgba(161, 14, 214, 0.53)',
                        'rgba(44, 168, 19, 0.68)',
                        'rgba(89, 121, 252, 1)',
                        'rgba(252, 187, 89, 0.71)',
                    ],
                }]
            },
            options: {}
        });
    </script>
{% endblock %}